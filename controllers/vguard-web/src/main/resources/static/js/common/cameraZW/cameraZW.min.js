(function(b,d,g,a){var k={cameraUp:21,cameraDown:22,cameraLeft:23,cameraRight:24,cameraLeftUp:25,cameraLeftDown:27,cameraRightUp:26,camerarightDown:28,camerafocalizeAdd:13,camerafocalizeDel:14,camerafocusAdd:11,camerafocusDel:12,cameraapertureAdd:15,cameraapertureDel:16};var j={cameraUp:0,cameraDown:1,cameraLeft:2,cameraRight:3,cameraLeftUp:32,cameraLeftDown:34,cameraRightUp:33,camerarightDown:35,camerafocalizeAdd:6,camerafocalizeDel:7,camerafocusAdd:4,camerafocusDel:5,cameraapertureAdd:8,cameraapertureDel:9};var e={up:1,down:2,left:3,right:4,leftup:5,leftdown:6,rightup:7,rightdown:8,focalizeAdd:9,focalizeDel:10,focusAdd:11,focusDel:12,apertureAdd:13,apertureDel:14,hk:1,dh:0,cameraRunStop:1,cameraRunStart:0,outtime:1000};var c=function(m,l){this.$element=m,this.defaults={brand:"1",channel:"1",width:"580",height:"300"},this.options=b.extend({},this.defaults,l)};c.prototype={cameraObj:function(){return this.$element},play:function(){if(this.cameraObj().valid){var m=this.cameraObj().LoginWp(this.options.ip,this.options.port,this.options.username,this.options.password,this.options.brand);var l=this.cameraObj().StartRealPlayWp(this.options.channel,this.options.brand);return m&&l}else{throw new error("视频播放插件无效")}},stopPlay:function(){if(this.cameraObj().valid){var l=this.cameraObj().StopRealPlayWp(this.options.brand);return l}else{throw new error("视频播放插件无效")}},logoutWp:function(){this.cameraObj().LogoutWp(this.options.brand)},command:function(o,n,l,m){if(n==a){n=0}if(l==a){l=0}if(m==a){m=0}o=this.transition(o);if(this.cameraObj().valid){this.cameraObj().PTZControlWp(this.options.channel,o,n,l,m,e.cameraRunStart,this.options.brand);h(e.outtime);this.cameraObj().PTZControlWp(this.options.channel,o,n,l,m,e.cameraRunStop,this.options.brand)}else{throw new error("视频播放插件无效")}},transition:function(l){if(this.options.brand==e.hk){switch(l){case e.up:return k.cameraUp;break;case e.down:return k.cameraDown;break;case e.left:return k.cameraLeft;break;case e.right:return k.cameraRight;break;case e.leftup:return k.cameraLeftUp;break;case e.leftdown:return k.cameraLeftDown;break;case e.rightup:return k.cameraRightUp;break;case e.rightdown:return k.camerarightDown;break;case e.focalizeAdd:return k.camerafocalizeAdd;break;case e.focalizeDel:return k.camerafocalizeDel;break;case e.focusAdd:return k.camerafocusAdd;break;case e.focusDel:return k.camerafocusDel;break;case e.apertureAdd:return k.cameraapertureAdd;break;case e.apertureDel:return k.cameraapertureDel;break}}else{if(this.options.brand==e.dh){switch(l){case e.up:return j.cameraUp;break;case e.down:return j.cameraDown;break;case e.left:return j.cameraLeft;break;case e.right:return j.cameraRight;break;case e.leftup:return j.cameraLeftUp;break;case e.leftdown:return j.cameraLeftDown;break;case e.rightup:return j.cameraRightUp;break;case e.rightdown:return j.camerarightDown;break;case e.focalizeAdd:return j.camerafocalizeAdd;break;case e.focalizeDel:return j.camerafocalizeDel;break;case e.focusAdd:return j.camerafocusAdd;break;case e.focusDel:return j.camerafocusDel;break;case e.apertureAdd:return j.cameraapertureAdd;break;case e.apertureDel:return j.cameraapertureDel;break}}}},up:function(l){this.command(e.up,0,l,0)},down:function(l){this.command(e.down,0,l,0)},left:function(l){this.command(e.left,0,l,0)},right:function(l){this.command(e.right,0,l,0)},leftUp:function(m,l){this.command(e.leftup,m,l,0)},leftDown:function(m,l){this.command(e.leftdown,m,l,0)},rightUp:function(m,l){this.command(e.rightup,m,l,0)},rightDown:function(m,l){this.command(e.rightdown,m,l,0)},focalizeAdd:function(l){this.command(e.focalizeAdd,0,l,0)},focalizeDel:function(l){this.command(e.focalizeDel,0,l,0)},focusAdd:function(l){this.command(e.focusAdd,0,l,0)},focusDel:function(l){this.command(e.focusDel,0,l,0)},apertureAdd:function(l){this.command(e.apertureAdd,0,l,0)},apertureDel:function(l){this.command(e.apertureDel,0,l,0)},setosd:function(l,o,n,m){if(plugin().valid){plugin().SetOsdCfgWp(this.options.channel,l,o,n,m,this.options.brand)}else{throw new error("视频播放插件无效")}}};b.fn.loadCamera=function(l){f(l);var m=new c(g.getElementById("plugin"),l);this.width(l.width);this.height(l.height);return m};function h(m){var l=+new Date();while(true){if(+new Date()-l>m){break}}}function i(l){var m=null;return function(){clearTimeout(m);m=setTimeout(l,e.outtime)}}function f(l){if(l.ip==a){throw new error("视频初始化时 没有传递ip地址：ip")}if(l.port==a){throw new error("视频初始化时 没有传递端口：port")}if(l.username==a){throw new error("视频初始化时 没有传递 用户名：username")}if(l.password==a){throw new error("视频初始化时 没有传递 密码：password")}if(l.channel==a){throw new error("视频初始化时 没有传递 通道号：channel")}}})(jQuery,window,document);